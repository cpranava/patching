---
- name: Patching of RHEL systems
  hosts: localhost
  tasks:
    - name: add host to selectIP group
      add_host:
        groups: selectIP
        name: "{{ host_ip }}"
      debug:
        msg: "Host IP: {{ host_ip }}"
        
- hosts: selectIP
  connection: ssh
  gather_facts: yes
  become: true
  become_method: sudo
  
  tasks:    
    - name:
      fail:
        msg: "Virtual Machine does not have RHEL OS"
      when: var=hostvars[inventory_hostname].ansible_distribution == "RedHat"
    - name: update the packages
      yum:
        name: '*'
        state: latest


   
